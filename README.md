# Satellite_Images

Описание программы 
Мы реализовали программу, которая определяет координаты углов изображения относительно подложки с геопривязкой. Данная программа основывается на схожести ключевых точек, найденных на изображении и на кропе подложки.
Создание контейнера для запуска програмы  
1.	Склонировать код с гита в папку и из нее запустить команды докера. Ветка репозитория main (master)
2.	Для запуска программы необходимо собрать докеробраз с помощью Dockerfile:
docker build . -f Dockerfile -t eda_18:latest
3.	Далее необходимо создать контейнер с помощью docker-compose.yaml:
docker-compose up –d
НО для правильности работы нашей программы нужно прокинуть внутри контейнера данные, необходимые для запуска.
Добавление данных внутрь контейнера
	Файлы подложек и кропов прокидываются при создании контейнера и находятся в папке /app/data. Чтобы это реализовать, нужно поменять в файле docker-compose.yaml поменять папку /data на свою.
volumes:
      	- /data/:/app/data

Запуск программы 
1.	Для запуска программы необходимо в созданном контейнере перейти в папке /app
2.	В терминале запустить следующую команду:
python3 main.py --crop_name {crop_name}.tif --layout_name {layout_name}.tif
При правильном запуске можно будет увидеть следующие логи в терминале.
## P.S New запуск программы
1. Открыть файл main.ipynb и запустить команды оттуда

Хранение данных 
1.	Входные данные
	Файлы подложек и кропов прокидываются при создании контейнера и находятся в папке /app/data. При запуске программы это следует учитывать для правильного указания путей до файлов. 
Пример пути до подложки:
dir = app/data/ layouts/ layout_2022-03-17.tif

2.	Выходные данные 
Программа на выходе выдает файл coord.csv со следующими полями:
	«layout_name» имя подложки, 
	«crop_name» имя снимка,   
	«ul», «ur», «br», «bl», где лево-верх, право-верх, право-низ, лево-низ координаты, сохраняется как строка, х и у разделены знаком «;»,
	«crs» координатная система в формате «EPSG: 32637»,  
	«start» и «end» время в формате «%Y-%m-%dT%h:%m:%s» начала и окончания обработки единичного загруженного снимка, после загрузки подложки и снимка, для точного контроля времени обработки."
Посмотреть на эти данные можно в папке: /app/data/results
Также можно визуально оценить схожесть кропа и кропа подложки по ключевым точкам в папке: /app/data/vis. (в целом визуально оценить работу программы)
Если программа не смогла найти совпадения, в файле будут одинаковые координаты.



